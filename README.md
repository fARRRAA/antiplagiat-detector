# Антиплагиат-Помощник

Полнофункциональное WPF приложение для проверки уникальности текста, автоматического перефразирования с помощью AI и оформления библиографии с расширенными возможностями управления проектами и конфигурацией.

## 🚀 Основные возможности

### 📄 Импорт и анализ документов
- **Множественные форматы**: .docx, .txt, .pdf, .rtf, прямой ввод текста
- **Автоматическая проверка уникальности** через API антиплагиат-системы (Text.ru, Advego)
- **Структурный анализ документа**: заголовки, абзацы, списки, таблицы
- **Определение языка текста** и соответствующих стандартов оформления
- **Автоматическое сохранение** с настраиваемыми интервалами
- **Поддержка больших документов** с оптимизированной обработкой

### 🔍 Детекция и анализ плагиата
- **Интерактивная карта плагиата** с цветовым кодированием:
  - 🔴 **Красный**: >70% совпадения (критично)
  - 🟡 **Желтый**: 30-70% совпадения (требует внимания)  
  - 🟢 **Зеленый**: <30% совпадения (допустимо)
- **Детальная информация** по каждому совпадению: источник, URL, процент, длина фрагмента
- **Исключение правомерных заимствований**: библиография, общеизвестные факты, терминология
- **Статистика документа**: общий процент уникальности, количество проблемных фрагментов
- **Кэширование результатов** для ускорения повторных проверок
- **Пакетная обработка** множественных документов

### 🤖 AI-перефразирование
- **Массовое перефразирование**: обработка всех проблемных участков одной кнопкой
- **Выборочное перефразирование**: работа с конкретными фрагментами
- **3 варианта на выбор** для каждого фрагмента:
  - Сохранение стиля (академический, научный, публицистический)
  - Разные уровни изменений (легкий, средний, глубокий)
  - Сохранение терминологии и ключевых понятий
- **Предпросмотр изменений** с возможностью отката
- **Контроль качества**: проверка сохранения смысла
- **Настраиваемые параметры AI**: температура, максимальные токены, модель
- **Пакетная обработка** с контролем нагрузки

### 📚 Автоматическое оформление цитат и ссылок
- **Распознавание цитат всех типов**:
  - Прямые цитаты в кавычках
  - Косвенные цитаты и пересказы
  - Блочные цитаты с отступами
  - Эпиграфы и выносные цитаты
  - Ссылки на источники
- **AI-поиск источников**: автоматическое определение автора, года, издания
- **Расширенные стандарты форматирования**: ГОСТ, APA, MLA, Chicago, Harvard, Vancouver, IEEE, Nature
- **Создание внутритекстовых ссылок** с автоматической нумерацией
- **Генерация сносок** (постраничные, концевые)
- **Автоматическое обогащение данных** источников через AI

### 📖 Управление библиографией
- **Автоматическое создание списка литературы**
- **Проверка полноты данных** об источниках
- **Поиск недостающих данных через AI**
- **Расширенная сортировка**: алфавитная, хронологическая, по типу источника
- **Дедупликация источников** с предупреждением о повторах
- **Валидация библиографических записей**
- **Поддержка различных типов источников**: книги, статьи, веб-сайты, журналы, диссертации, конференции, отчеты
- **Избранные источники** для быстрого доступа

### 💾 База данных и управление проектами
- **SQL Server LocalDB** с автоматической инициализацией
- **Профили пользователей** с настройками по умолчанию
- **История проектов** с возможностью продолжения работы
- **Версионность документов**: сохранение этапов редактирования
- **Шаблоны оформления** для разных типов работ
- **Избранные источники** для быстрого доступа
- **Статистика работы**: количество обработанных документов, улучшение уникальности
- **Демо-данные** для быстрого старта
- **Автоматическое резервное копирование** конфигурации

### ⚙️ Расширенная конфигурация и безопасность
- **Централизованная конфигурация** через AppConfig
- **Безопасное хранение API ключей** с шифрованием
- **Настраиваемые параметры HTTP**: таймауты, повторные попытки, ограничения
- **Кэширование с настраиваемым временем жизни**
- **Пакетная обработка** с контролем параллельных запросов
- **Детальное логирование** операций
- **Автоматическое сохранение** настроек

## 🛠 Технические требования

### Системные требования
- **Операционная система**: Windows 10/11
- **Framework**: .NET Framework 4.7.2 или выше
- **База данных**: SQL Server LocalDB (устанавливается автоматически)
- **Оперативная память**: минимум 4 ГБ, рекомендуется 8 ГБ
- **Свободное место на диске**: 1 ГБ (включая кэш и конфигурацию)
- **Интернет-соединение**: требуется для AI-функций и проверки плагиата

### Используемые технологии
- **WPF** - пользовательский интерфейс
- **HandyControls** - современные UI компоненты с русской локализацией
- **Entity Framework 6** - работа с базой данных и ORM
- **OpenRouter API** - AI перефразирование (модель deepseek/deepseek-chat-v3.1:free)
- **Text.ru API / Advego API** - проверка на плагиат с fallback на демо-данные
- **DocumentFormat.OpenXml** - работа с .docx файлами
- **iTextSharp** - работа с PDF файлами
- **HtmlAgilityPack** - парсинг HTML контента
- **Newtonsoft.Json** - сериализация конфигурации и API ответов
- **System.Net.Http** - HTTP клиент для API запросов
- **Windows Data Protection API** - шифрование API ключей

### Архитектура приложения
- **MVVM паттерн** - разделение логики и представления
- **Singleton конфигурация** - централизованное управление настройками
- **Сервисный слой** - модульная архитектура сервисов
- **Асинхронное программирование** - неблокирующие операции
- **Кэширование** - оптимизация повторных запросов
- **Логирование** - детальное отслеживание операций



## 📖 Руководство пользователя

### Первоначальная настройка

#### Настройка API ключей
1. **Скопируйте шаблон конфигурации**:
   ```bash
   cp Plagiat/apikeys.json.template Plagiat/apikeys.json
   ```
2. **Получите API ключи**:
   - **OpenRouter**: зарегистрируйтесь на [OpenRouter.ai](https://openrouter.ai/) и создайте API ключ
   - **Advego**: зарегистрируйтесь на [Advego.com](https://advego.com/) и получите API ключ
3. **Заполните файл** `Plagiat/apikeys.json` вашими ключами
4. **Запустите приложение** - конфигурация загрузится автоматически

#### Первый запуск
1. **Автоматическая инициализация базы данных** произойдет при первом запуске
2. **Демо-данные** будут созданы для быстрого старта
3. **Настройки по умолчанию** будут применены автоматически

### Пошаговый алгоритм работы

#### ЭТАП 1: Загрузка и первичный анализ
1. **Создайте новый проект**: `Новый проект` или используйте демо-проект
2. **Импортируйте документ**:
   - Нажмите `Импорт документа` ИЛИ
   - Перетащите файл в окно приложения ИЛИ  
   - Вставьте текст напрямую в редактор
3. **Автоматическая проверка уникальности** запустится автоматически
4. **Результаты кэшируются** для ускорения повторных проверок

#### ЭТАП 2: Анализ результатов
1. **Изучите цветовую карту** документа:
   - Красные участки требуют обязательного исправления
   - Желтые участки рекомендуется перефразировать
   - Зеленые участки в порядке
2. **Просмотрите детали** в правой панели:
   - Статистика по уровням критичности
   - Список всех найденных совпадений
   - Информация об источниках
3. **Используйте фильтры** для сортировки результатов

#### ЭТАП 3: Исправление проблемных участков
1. **Массовое перефразирование**:
   - Нажмите `Перефразировать всё`
   - Выберите настройки: стиль, глубина изменений, модель AI
   - Просмотрите все варианты в диалоге выбора
   - Примените изменения пакетно
2. **Выборочная работа**:
   - Выделите проблемный фрагмент
   - Используйте контекстное меню `Перефразировать выделенное`
   - Выберите лучший из 3 предложенных вариантов
   - Сохраните изменения

#### ЭТАП 4: Оформление цитат и источников
1. **Автоматическое распознавание**:
   - Приложение найдет потенциальные цитаты всех типов
   - Проверьте предложения во вкладке `Цитаты`
2. **AI-поиск источников**:
   - Для каждой цитаты будет найдена информация об источнике
   - Выберите стандарт оформления (ГОСТ/APA/MLA/Chicago/Harvard/Vancouver/IEEE/Nature)
   - Примените форматирование автоматически
3. **Обогащение данных**:
   - AI автоматически дополнит недостающие данные источников
   - Проверьте и отредактируйте найденную информацию

#### ЭТАП 5: Создание библиографии
1. **Автоматическая генерация**:
   - Перейдите во вкладку `Библиография`
   - Все использованные источники будут собраны автоматически
2. **Проверка и улучшение**:
   - Проверьте полноту библиографических записей
   - Исправьте найденные недочеты
   - Используйте избранные источники для быстрого доступа
   - Экспортируйте готовый список литературы

#### ЭТАП 6: Финальная проверка и экспорт
1. **Повторная проверка уникальности** запустится автоматически
2. **Сравните результаты** с первоначальными показателями
3. **Сохраните проект** для будущих доработок
4. **Экспортируйте документ** в нужном формате
5. **Просмотрите статистику** работы с проектом

## 🎨 Интерфейс приложения

### Основные элементы
- **Панель инструментов**: быстрый доступ к основным функциям
- **Дерево проектов**: управление проектами и документами (слева)
- **Текстовый редактор**: основная рабочая область (центр)
- **Панель результатов**: анализ плагиата, цитаты, библиография (справа)
- **Строка состояния**: текущий статус операций

### Горячие клавиши
- `Ctrl+N` - Новый проект
- `Ctrl+O` - Открыть проект  
- `Ctrl+S` - Сохранить проект
- `Ctrl+I` - Импорт документа
- `F5` - Проверить плагиат
- `F6` - Перефразировать выделенное

## 🔧 Настройки

### Стили цитирования
Поддерживаются следующие стили:
- **ГОСТ** - российский стандарт (по умолчанию)
- **APA** - American Psychological Association
- **MLA** - Modern Language Association  
- **Chicago** - Chicago Manual of Style
- **Harvard** - Harvard referencing system
- **Vancouver** - Vancouver system
- **IEEE** - Institute of Electrical and Electronics Engineers
- **Nature** - Nature journal style

### Параметры перефразирования
- **Стиль**: академический, научный, публицистический, нейтральный
- **Уровень изменений**: легкий, средний, глубокий
- **Сохранение терминологии**: включено/выключено
- **Модель AI**: deepseek-chat-v3.1:free (настраивается)
- **Температура**: 0.1-1.0 (креативность)
- **Максимальные токены**: ограничение длины ответа

### Настройки API и производительности
- **Таймауты HTTP**: настраиваемые интервалы ожидания
- **Повторные попытки**: количество попыток при ошибках
- **Параллельные запросы**: ограничение одновременных запросов
- **Кэширование**: включение/выключение с настраиваемым временем жизни
- **Пакетная обработка**: размер пакетов для массовых операций

### Безопасность и конфигурация
- **Шифрование API ключей**: автоматическая защита ключей
- **Автоматическое сохранение**: интервалы сохранения настроек
- **Логирование**: детальное отслеживание операций
- **Резервное копирование**: автоматическое сохранение конфигурации

## 📊 Статистика и отчеты

Приложение предоставляет детальную статистику:
- **Общий процент уникальности** документа
- **Количество проблемных фрагментов** по уровням критичности
- **Статистика по источникам** и цитатам
- **История изменений** уникальности
- **Время, затраченное** на обработку
- **Статистика использования AI** функций
- **Производительность кэширования**
- **Статистика проектов** и документов

## 🧪 Тестирование и демо-данные

### Тестовые документы
В папке `TestDocuments/` предоставлены готовые тестовые файлы:
- **01_original_text.txt** - оригинальный текст для сравнения
- **02_high_plagiarism.txt** - высокий уровень плагиата (>70%)
- **03_medium_plagiarism.txt** - средний уровень плагиата (30-70%)
- **04_low_plagiarism.txt** - низкий уровень плагиата (<30%)
- **05_with_citations.txt** - документ с правильными цитатами
- **06_scientific_paper.txt** - научная статья с полным оформлением
- **07_paraphrase_test.txt** - тестирование перефразирования
- **08_bibliography_test.txt** - тестирование библиографии
- **09_mixed_content.txt** - комплексный тест всех функций
- **10_test_document.rtf** - тестирование RTF формата

### Демо-данные
При первом запуске создаются:
- **Демо-проект** с примером структуры
- **Тестовые источники** для работы с библиографией
- **Примеры цитат** различных типов

## 🔒 Безопасность

### Защита данных
- **API ключи шифруются** с использованием Windows Data Protection API
- **Конфигурация сохраняется** в защищенной директории пользователя
- **Локальная база данных** - все данные остаются на вашем компьютере
- **Нет передачи личных данных** третьим лицам

### Конфиденциальность
- **Тексты документов** не передаются на внешние серверы (кроме API проверки плагиата)
- **AI перефразирование** использует только выделенные фрагменты
- **Кэширование** происходит локально
- **Логирование** ведется только локально

